<meta charset="utf-8">
<h1>Arrays | Higher-Order Functions</h1>

<script>

    // Higher-Order Function: uma função ou método que recebe outras funções como parâmetros e/ou retornam funções como resultado de suas operações

    const usuarios = [
        { user: 'usuario1', idade: 32, ativo: true },
        { user: 'usuario2', idade: 27, ativo: true },
        { user: 'usuario3', idade: 21, ativo: false }
    ];

    // forEach(): método que serve pra percorrer arrays
    // funcão callback: é um tipo de função que é executada quando algo acontecer ou seja, é executada "depois" de algo ocorrer.
    // usuarios.forEach(function(valor, indice) {
    //     console.log('Indice:', indice);
    //     console.log('Valor:', valor);
    // });

    usuarios.forEach(valor => console.log('Valor:', valor));

    // find(): percorre um array e retorna o primeiro item que atender a condição especificada
    // const usuarioInativoMenos30 = usuarios.find(function(usuario) {
    //     return usuario.idade < 30 && usuario.ativo == false;
    // });

    const usuarioInativoMenos30 = usuarios.find(usuario => usuario.idade < 30 && usuario.ativo == false);
    console.log(usuarioInativoMenos30);

    // findIndex(): percorre um array e retorna a posição do item que atender a condição especificada
    const posicaoUsuarioInativo30 = usuarios.findIndex(usuario => usuario.idade < 30 && usuario.ativo == false);
    console.log(posicaoUsuarioInativo30);

    // filter(): percorrer um array e retorna TODOS OS ITENS que atenderem a condição especificada
    const usuariosMenos30 = usuarios.filter(usuario => usuario.idade < 30);
    console.log(usuariosMenos30);

    // some(): percorre um array e checa se ao menos 1 elemento atende a condição especificada, se sim retorna TRUE, caso contrario FALSE
    let temAlguemInativo = usuarios.some(u => !u.ativo) ? "HÁ AO MENOS 1 USUÁRIO INATIVO NA LISTA" : "NÃO HÁ USUARIOS INATIVOS NA LISTA";
    console.log(temAlguemInativo);

    // every(): percorre um array e checa se TODOS OS ELEMENTOS atendem a condição especificada, se sim retorna TRUE, caso contrario FALSE 
    let todosEstaoAtivos = usuarios.every(usuario => usuario.ativo == true);
    console.log(todosEstaoAtivos);

    // map(): percorre um array e gera um novo array a partir das informações do array percorrido
    const idadesUsuarios = usuarios.map(usuario => usuario.idade);
    console.log(idadesUsuarios);

    // reduce(): reduz os valores de um array a um único resultado
    let somaDasIdades = usuarios.reduce((valorAcumulado, usuario) => valorAcumulado + usuario.idade, 0);
    console.log(somaDasIdades);

</script>